import{c as k,u as q,r,j as e,M as ye,U as we,t as Ae,p as Ne,n as ie,S as Be,q as B,l as Y,o as ce,d as M,w as V,e as H,A as _,L as G,z as de,X as te,v as Te,B as se,P as Pe,E as Ee,G as pe,H as Re,F as Ve,I as Fe,h as ae,f as N,s as ee,x as X,R as $e,C as _e,i as ke,k as Ce,J as Oe,K as qe}from"./index-Cm7RGjpv.js";import{L as We,d as oe,e as be,i as Ue,P as K,f as $,S as xe,C as Ge,g as He,j as Qe,a as Je,W as Ye,h as Ke,c as ge,R as Se,T as Ze,b as Xe}from"./SurveyPad-CaIbktMu.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=k("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=k("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=k("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=k("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=k("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=k("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=k("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=k("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=k("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=k("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=k("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=k("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=k("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=k("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=k("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=k("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),mt=({onBack:i})=>{const[s,n]=r.useState(""),[d,u]=r.useState("Square Feet"),[o,t]=r.useState("Square Meter"),[x,p]=r.useState(null),a={"Square Feet":1,"Square Yard":9,"Square Meter":10.76,Acre:43560,Hectare:107639,Gaj:9,"Bigha (Pucca)":27225,Ground:2400},m=()=>{const c=parseFloat(s);if(isNaN(c))return;const f=c*a[d]/a[o];p(`${c} ${d} = ${f.toLocaleString("en-IN",{maximumFractionDigits:4})} ${o}`)};return e.jsxs("div",{className:"max-w-2xl animate-fade-in mx-auto",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 mb-6 font-bold uppercase text-[10px] tracking-widest group",children:[e.jsx(_,{size:18})," Back to Hub"]}),e.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-xl",children:[e.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-8 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-50 text-orange-600 rounded-2xl shadow-sm",children:e.jsx(Se,{size:24})})," Area Dimension Converter"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-1",children:"Input Value"}),e.jsx("input",{type:"number",value:s,onChange:c=>n(c.target.value),placeholder:"0.00",className:"w-full px-6 py-5 rounded-2xl border border-slate-200 outline-none focus:ring-4 focus:ring-primary/10 transition-all text-2xl font-black bg-slate-50"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("select",{value:d,onChange:c=>u(c.target.value),className:"w-full px-5 py-4 rounded-2xl border border-slate-200 bg-white font-bold text-slate-700 outline-none",children:Object.keys(a).map(c=>e.jsx("option",{value:c,children:c},c))}),e.jsx("select",{value:o,onChange:c=>t(c.target.value),className:"w-full px-5 py-4 rounded-2xl border border-slate-200 bg-white font-bold text-slate-700 outline-none",children:Object.keys(a).map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsx("button",{onClick:m,className:"w-full bg-slate-900 text-white font-black py-5 rounded-[1.5rem] hover:bg-black transition-all shadow-xl active:scale-95",children:"Scale Geometry"}),x&&e.jsx("div",{className:"p-8 bg-primary text-white rounded-[2rem] font-black text-xl text-center shadow-2xl animate-fade-in",children:x})]})]})]})},ut=({onBack:i})=>{const[s,n]=r.useState("5000000"),[d,u]=r.useState("8.5"),[o,t]=r.useState("20"),[x,p]=r.useState(null),a=()=>{const m=parseFloat(s),c=parseFloat(d)/12/100,f=parseFloat(o)*12,b=m*c*Math.pow(1+c,f)/(Math.pow(1+c,f)-1);p(Math.round(b))};return e.jsxs("div",{className:"max-w-2xl animate-fade-in mx-auto",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 mb-6 font-bold uppercase text-[10px] tracking-widest group",children:[e.jsx(_,{size:18})," Back"]}),e.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-xl",children:[e.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-8 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-emerald-50 text-emerald-600 rounded-2xl shadow-sm",children:e.jsx(se,{size:24})})," Institutional EMI Estimator"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("input",{type:"number",value:s,onChange:m=>n(m.target.value),className:"w-full px-6 py-4 rounded-2xl border border-slate-200 outline-none font-black text-xl bg-slate-50",placeholder:"Loan Amount"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"number",value:d,onChange:m=>u(m.target.value),className:"w-full px-5 py-4 rounded-2xl border border-slate-200 outline-none font-black bg-slate-50",placeholder:"Interest %",step:"0.1"}),e.jsx("input",{type:"number",value:o,onChange:m=>t(m.target.value),className:"w-full px-5 py-4 rounded-2xl border border-slate-200 outline-none font-black bg-slate-50",placeholder:"Years"})]}),e.jsx("button",{onClick:a,className:"w-full bg-primary text-white font-black py-5 rounded-[1.5rem] hover:bg-primary-dark transition-all shadow-2xl active:scale-95",children:"Calculate Payment"}),x!==null&&e.jsxs("div",{className:"p-10 bg-slate-900 text-white rounded-[2rem] text-center border-b-8 border-primary shadow-2xl",children:[e.jsx("div",{className:"text-[10px] uppercase font-black text-slate-500 tracking-[0.4em] mb-1",children:"Monthly Installment"}),e.jsxs("div",{className:"text-5xl font-black text-primary-light",children:["₹",x.toLocaleString("en-IN")]})]})]})]})]})},ht=({onBack:i})=>{const[s,n]=r.useState(""),[d,u]=r.useState(()=>{const t=localStorage.getItem("abs_survey_pad");return t?JSON.parse(t):[]});r.useEffect(()=>{localStorage.setItem("abs_survey_pad",JSON.stringify(d))},[d]);const o=()=>{s.trim()&&(u([s,...d]),n(""))};return e.jsxs("div",{className:"max-w-2xl animate-fade-in mx-auto",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 mb-6 font-bold uppercase text-[10px] tracking-widest group",children:[e.jsx(_,{size:18})," Back"]}),e.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-xl",children:[e.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-8 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 text-purple-600 rounded-2xl shadow-sm",children:e.jsx(ze,{size:26})})," Digital Survey Pad"]}),e.jsx("textarea",{placeholder:"Quick observations from the field...",rows:4,className:"w-full px-6 py-5 rounded-[1.5rem] border border-slate-200 bg-slate-50 outline-none font-medium mb-4",value:s,onChange:t=>n(t.target.value)}),e.jsxs("button",{onClick:o,className:"w-full bg-slate-900 text-white py-5 rounded-[1.5rem] font-black shadow-2xl flex items-center justify-center gap-3 active:scale-95 transition-all",children:[e.jsx(K,{size:20})," Save Site Note"]}),e.jsxs("div",{className:"mt-8 space-y-3 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:[d.map((t,x)=>e.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 text-sm text-slate-600",children:t},x)),d.length===0&&e.jsx("p",{className:"text-center text-slate-400 py-4 text-xs italic",children:"No site notes captured."})]})]})]})},pt=()=>{const{user:i}=q(),[s,n]=r.useState("checked-out"),[d,u]=r.useState(!1),[o,t]=r.useState(null),[x,p]=r.useState(new Date);r.useEffect(()=>{const m=setInterval(()=>p(new Date),1e3);return()=>clearInterval(m)},[]),r.useEffect(()=>{if(!i)return;const m=new Date().toISOString().split("T")[0],c=B(M(N,"attendance"),V("userId","==",i.uid),V("date","==",m),Y(1)),f=H(c,{next:b=>{if(b.empty)t(null),n("checked-out");else{const w={id:b.docs[0].id,...b.docs[0].data()};t(w),n(w.checkOut?"checked-out":"checked-in")}},error:b=>{b.code!=="permission-denied"&&console.error("Attendance error",b)}});return()=>f()},[i]);const a=async()=>{if(i){if(u(!0),!navigator.geolocation){alert("Geolocation required for attendance."),u(!1);return}navigator.geolocation.getCurrentPosition(async m=>{const c=new Date().toISOString().split("T")[0];try{if(s==="checked-out"&&!o){const f=new Date().getHours()>=10;await ae(M(N,"attendance"),{userId:i.uid,userName:i.displayName||i.email,date:c,checkIn:ee(),status:f?"Late":"Present",location:{lat:m.coords.latitude,lng:m.coords.longitude}})}else s==="checked-in"&&o&&await ke(Ce(N,"attendance",o.id),{checkOut:ee()})}catch(f){f.code!=="permission-denied"?(console.error("Attendance Error",f),alert("Failed to mark attendance.")):alert("Attendance access restricted.")}finally{u(!1)}},m=>{alert("Location access denied."),u(!1)})}};return e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 rounded-[2.5rem] text-white shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/5 rounded-full blur-3xl -mr-10 -mt-10"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[e.jsx("div",{className:"text-xs font-bold uppercase tracking-[0.2em] text-slate-400 mb-2",children:"Attendance"}),e.jsx("div",{className:"text-4xl font-black mb-1 font-mono",children:x.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx("div",{className:"text-sm text-slate-400 font-medium mb-8",children:new Date().toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"long"})}),e.jsx("button",{onClick:a,disabled:d||s==="checked-out"&&o!==null,className:`w-40 h-40 rounded-full border-8 flex flex-col items-center justify-center transition-all active:scale-95 shadow-2xl ${d?"border-slate-600 bg-slate-700":s==="checked-out"&&!o?"border-emerald-500/30 bg-emerald-500 hover:bg-emerald-400 text-white":s==="checked-in"?"border-rose-500/30 bg-rose-500 hover:bg-rose-400 text-white":"border-slate-700 bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:d?e.jsx(G,{className:"animate-spin",size:32}):s==="checked-out"&&!o?e.jsxs(e.Fragment,{children:[e.jsx(rt,{size:40}),e.jsx("span",{className:"text-xs font-black mt-2 uppercase tracking-wide",children:"Punch In"})]}):s==="checked-in"?e.jsxs(e.Fragment,{children:[e.jsx(oe,{size:40}),e.jsx("span",{className:"text-xs font-black mt-2 uppercase tracking-wide",children:"Punch Out"})]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{size:40}),e.jsx("span",{className:"text-xs font-black mt-2 uppercase tracking-wide",children:"Done"})]})})]})]})},bt=()=>{const{user:i}=q(),[s,n]=r.useState([]),[d,u]=r.useState(!1),[o,t]=r.useState({clientName:"",amount:"",invoiceNo:"",invoiceDate:new Date().toISOString().split("T")[0]});r.useEffect(()=>{if(!i)return;const a=B(M(N,"invoices"),V("userId","==",i.uid)),m=H(a,{next:c=>{const f=c.docs.map(b=>({id:b.id,...b.data()}));f.sort((b,w)=>new Date(w.invoiceDate).getTime()-new Date(b.invoiceDate).getTime()),n(f)},error:c=>console.error("Billing fetch error",c)});return()=>m()},[i]);const x=async a=>{a.preventDefault(),i&&(await ae(M(N,"invoices"),{userId:i.uid,...o,amount:parseFloat(o.amount),status:"Draft",dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}),u(!1),t({clientName:"",amount:"",invoiceNo:"",invoiceDate:new Date().toISOString().split("T")[0]}))},p=s.filter(a=>a.status!=="Paid").reduce((a,m)=>a+m.amount,0);return e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Billing"}),e.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider",children:["Outstanding: ₹",p.toLocaleString()]})]}),e.jsx("button",{onClick:()=>u(!d),className:"p-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors",children:d?e.jsx(te,{size:20}):e.jsx(K,{size:20})})]}),d?e.jsxs("form",{onSubmit:x,className:"space-y-4 animate-fade-in",children:[e.jsx("input",{required:!0,placeholder:"Invoice #",className:"w-full p-3 bg-slate-50 rounded-xl text-sm font-bold border border-slate-200",value:o.invoiceNo,onChange:a=>t({...o,invoiceNo:a.target.value})}),e.jsx("input",{required:!0,placeholder:"Client / Bank",className:"w-full p-3 bg-slate-50 rounded-xl text-sm font-bold border border-slate-200",value:o.clientName,onChange:a=>t({...o,clientName:a.target.value})}),e.jsx("input",{required:!0,type:"number",placeholder:"Amount (₹)",className:"w-full p-3 bg-slate-50 rounded-xl text-sm font-bold border border-slate-200",value:o.amount,onChange:a=>t({...o,amount:a.target.value})}),e.jsx("input",{required:!0,type:"date",className:"w-full p-3 bg-slate-50 rounded-xl text-sm font-bold border border-slate-200",value:o.invoiceDate,onChange:a=>t({...o,invoiceDate:a.target.value})}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-slate-900 text-white rounded-xl font-bold text-xs uppercase tracking-wider",children:"Create Invoice"})]}):e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-3",children:s.length===0?e.jsx("p",{className:"text-center text-slate-400 text-xs italic py-10",children:"No pending bills."}):s.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-slate-50 border border-slate-100 group hover:border-indigo-100 transition-colors",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800 text-sm",children:a.clientName}),e.jsxs("div",{className:"text-[10px] text-slate-400 font-bold",children:["INV-",a.invoiceNo," • ",a.status]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-black text-slate-900 text-sm",children:["₹",a.amount.toLocaleString()]}),e.jsx("div",{className:"text-[10px] text-red-400 font-bold",children:a.dueDate<new Date().toISOString().split("T")[0]&&a.status!=="Paid"?"Overdue":""})]})]},a.id))})]})},gt=({metrics:i})=>{const s=$e.useMemo(()=>{const p=Math.min(i.attendance,100),a=i.completedCases>0?i.completedCases/(i.completedCases+i.pendingCases)*100:0,m=i.timelyReports,c=p*.2+a*.4+m*.4;return Math.round(c)||0},[i]),n=80,d=2*Math.PI*n,u=d-s/100*d,o=s>=80?"text-emerald-500":s>=60?"text-amber-500":"text-rose-500",t=s>=80?"#10b981":s>=60?"#f59e0b":"#f43f5e",x=s>=90?"Outstanding":s>=80?"Excellent":s>=70?"Good":s>=60?"At Risk":"Critical";return e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm flex flex-col items-center justify-center relative overflow-hidden h-full group",children:[e.jsx("h3",{className:"font-black text-xl text-slate-900 mb-6 z-10",children:"Performance Score"}),e.jsxs("div",{className:"relative z-10 mb-8 transform group-hover:scale-105 transition-transform duration-500",children:[e.jsxs("svg",{className:"transform -rotate-90 w-48 h-48 drop-shadow-xl",children:[e.jsx("circle",{cx:"96",cy:"96",r:n,stroke:"currentColor",strokeWidth:"12",fill:"transparent",className:"text-slate-100"}),e.jsx("circle",{cx:"96",cy:"96",r:n,stroke:t,strokeWidth:"12",fill:"transparent",strokeDasharray:d,strokeDashoffset:u,strokeLinecap:"round",className:"transition-all duration-1000 ease-out shadow-[0_0_10px_rgba(0,0,0,0.2)]"})]}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center",children:[e.jsx("span",{className:`text-5xl font-black ${o}`,children:s}),e.jsx("span",{className:`block text-[10px] font-bold uppercase tracking-widest mt-1 ${o}`,children:x})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full text-center z-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Attendance"}),e.jsxs("div",{className:"font-black text-slate-800",children:[Math.round(i.attendance),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Timeliness"}),e.jsxs("div",{className:"font-black text-slate-800",children:[Math.round(i.timelyReports),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Work"}),e.jsxs("div",{className:"font-black text-slate-800",children:[(i.completedCases>0?i.completedCases/(i.completedCases+i.pendingCases)*100:0).toFixed(0),"%"]})]})]})]})},ft=({onBack:i})=>{const{user:s}=q(),[n,d]=r.useState({pendingBillsCount:0,pendingBillsAmount:0,paidBillsCount:0,paidBillsAmount:0,pendingCases:0,completedCases:0,timelyReports:0,siteVisits:0,bankVisits:0,attendance:0}),[u,o]=r.useState(!0);if(r.useEffect(()=>{if(!s)return;(async()=>{try{const p=B(M(N,"invoices"),V("userId","==",s.uid)),a=await X(p);let m=0,c=0,f=0,b=0;a.forEach(P=>{const I=P.data(),J=I.amount||0;I.status==="Paid"?(f++,b+=J):(m++,c+=J)});const w=B(M(N,"surveys"),V("employeeId","==",s.uid)),g=await X(w);let C=0,T=0,z=0,h=0;g.forEach(P=>{const I=P.data();I.status==="draft"?C++:(I.status==="submitted"||I.status==="reviewed")&&(T++,h++,z++)});const v=h>0?z/h*100:100,L=B(M(N,"daily_work_logs"),V("userId","==",s.uid)),S=await X(L);let D=0,O=0;S.forEach(P=>{const I=P.data();I.category==="Site Visit"&&D++,(I.bank||I.category==="Meeting")&&O++});const le=B(M(N,"attendance"),V("userId","==",s.uid)),W=await X(le),Z=new Set;W.forEach(P=>{P.data().date&&Z.add(P.data().date)});const Q=Math.min(Z.size/26*100,100);d({pendingBillsCount:m,pendingBillsAmount:c,paidBillsCount:f,paidBillsAmount:b,pendingCases:C,completedCases:T,timelyReports:v,siteVisits:D,bankVisits:O,attendance:Q})}catch(p){p.code!=="permission-denied"&&console.error("Error fetching performance data",p)}finally{o(!1)}})()},[s]),u)return e.jsx("div",{className:"p-20 text-center",children:e.jsx(G,{className:"animate-spin text-primary mx-auto"})});const t=[{label:"Pending Bills",mainVal:`₹${(n.pendingBillsAmount/1e3).toFixed(1)}k`,subVal:`${n.pendingBillsCount} Invoices`,icon:et,percent:100,color:"rose"},{label:"Paid Bills",mainVal:`₹${(n.paidBillsAmount/1e3).toFixed(1)}k`,subVal:`${n.paidBillsCount} Invoices`,icon:Ye,percent:100,color:"emerald"},{label:"Pending Cases",mainVal:n.pendingCases,subVal:"Drafts",icon:Te,percent:n.pendingCases/(n.pendingCases+n.completedCases||1)*100,color:"amber"},{label:"Completed Cases",mainVal:n.completedCases,subVal:"Submitted",icon:at,percent:100,color:"blue"},{label:"Timeliness",mainVal:`${Math.round(n.timelyReports)}%`,subVal:"Within SLA",icon:dt,percent:n.timelyReports,color:n.timelyReports>90?"emerald":"rose"},{label:"Site Visits",mainVal:n.siteVisits,subVal:"This Month",icon:de,percent:Math.min(n.siteVisits/30*100,100),color:"teal"},{label:"Bank Visits",mainVal:n.bankVisits,subVal:"Liaisoning",icon:se,percent:Math.min(n.bankVisits/10*100,100),color:"purple"},{label:"Attendance",mainVal:`${Math.round(n.attendance)}%`,subVal:"Monthly",icon:xt,percent:n.attendance,color:n.attendance>90?"emerald":"orange"}];return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:i,className:"p-3 bg-white text-slate-500 hover:text-slate-800 rounded-xl shadow-sm",children:e.jsx(_,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:"My Performance"}),e.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Live Metrics & Analysis"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1 h-96",children:e.jsx(gt,{metrics:n})}),e.jsx("div",{className:"lg:col-span-1 h-96",children:e.jsx(pt,{})}),e.jsx("div",{className:"lg:col-span-1 h-96",children:e.jsx(bt,{})})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm",children:[e.jsxs("h3",{className:"font-black text-xl text-slate-900 mb-6 flex items-center gap-2",children:[e.jsx(ie,{size:24,className:"text-primary"})," Key Performance Indicators"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((x,p)=>e.jsxs("div",{className:"p-6 bg-slate-50 rounded-2xl border border-slate-100 hover:border-slate-200 transition-all hover:-translate-y-1 hover:shadow-lg group",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("div",{className:`p-3 bg-white rounded-xl shadow-sm text-${x.color}-500`,children:e.jsx(x.icon,{size:20})}),e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-lg h-fit bg-${x.color}-50 text-${x.color}-600`,children:x.subVal})]}),e.jsx("div",{className:"text-3xl font-black text-slate-900 mb-1",children:x.mainVal}),e.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-3",children:x.label}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full bg-${x.color}-500 transition-all duration-1000`,style:{width:`${x.percent}%`}})})]},p))})]})]})},je=({onBack:i})=>{const{user:s,userRole:n}=q(),d=r.useRef(null),u=r.useRef(null),[o,t]=r.useState(!1),[x,p]=r.useState(null),[a,m]=r.useState(!1),[c,f]=r.useState([]),[b,w]=r.useState(!1),[g,C]=r.useState({type:"Residential",rate:"",areaName:"",city:"",boundaries:{north:"",south:"",east:"",west:""}}),[T,z]=r.useState(!1),h=r.useRef(null),[v,L]=r.useState(""),[S,D]=r.useState(!1),[O,le]=r.useState("All"),[W,Z]=r.useState("All"),[Q,P]=r.useState(""),[I,J]=r.useState(!1),U=r.useRef(null);r.useEffect(()=>{if(!d.current||u.current)return;const l=$.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap"}),j=$.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri"}),y=$.map(d.current,{center:[29.2104,78.9619],zoom:13,layers:[l]});return $.control.layers({"Street Map":l,Satellite:j},void 0,{position:"bottomright"}).addTo(y),h.current=$.layerGroup().addTo(y),y.on("click",A=>{const{lat:E,lng:F}=A.latlng;if(p({lat:E,lng:F}),t(!0),U.current)U.current.setLatLng(A.latlng);else{const R=$.marker(A.latlng,{draggable:!0,autoPan:!0});R.on("dragend",re=>{const ne=re.target.getLatLng();p({lat:ne.lat,lng:ne.lng})}),R.addTo(y),U.current=R}}),u.current=y,z(!0),()=>{u.current&&(u.current.remove(),u.current=null)}},[]),r.useEffect(()=>{const l=["admin","super_admin","employee"].includes(n||""),j=l?B(M(N,"market_intelligence"),ce("timestamp","desc"),Y(1e3)):B(M(N,"market_intelligence"),V("userId","==",s==null?void 0:s.uid),Y(1e3)),y=H(j,{next:A=>{const E=A.docs.map(F=>({id:F.id,...F.data()}));l||E.sort((F,R)=>{var ue,he;const re=(ue=F.timestamp)!=null&&ue.toMillis?F.timestamp.toMillis():0;return((he=R.timestamp)!=null&&he.toMillis?R.timestamp.toMillis():0)-re}),f(E),w(!1)},error:A=>{A.code==="permission-denied"?w(!0):console.error("Market data fetch error",A)}});return()=>y()},[s,n]);const me=r.useMemo(()=>{let l=c;if(v){const j=v.toLowerCase();l=l.filter(y=>(y.areaName||"").toLowerCase().includes(j)||(y.city||"").toLowerCase().includes(j))}if(O!=="All"&&(l=l.filter(j=>j.type===O)),W!=="All"){const j=parseInt(W),y=new Date,A=new Date(y.setDate(y.getDate()-j));l=l.filter(E=>{var R;return((R=E.timestamp)!=null&&R.toDate?E.timestamp.toDate():new Date(E.timestamp))>=A})}return l},[c,v,O,W]);r.useEffect(()=>{!T||!u.current||!h.current||(h.current.clearLayers(),me.forEach(l=>{const j=l.type==="Commercial"?"#3b82f6":"#10b981";$.circleMarker([l.lat,l.lng],{radius:8,fillColor:j,color:"#fff",weight:2,opacity:1,fillOpacity:.8}).bindPopup(`
            <div style="font-family: sans-serif;">
                <b style="font-size:14px;">${l.type}</b><br/>
                <span style="font-size:16px; font-weight:bold; color:#2563eb;">₹${l.rate}</span><br/>
                <span style="font-size:11px; color:#666; font-weight:600;">${l.areaName}</span>
                ${l.boundaries&&(l.boundaries.north||l.boundaries.south||l.boundaries.east||l.boundaries.west)?`
                    <div style="margin-top:6px; padding-top:6px; border-top:1px solid #eee; font-size:10px; color:#444; line-height:1.4;">
                        ${l.boundaries.north?`<div><b style="color:#888;">N:</b> ${l.boundaries.north}</div>`:""}
                        ${l.boundaries.south?`<div><b style="color:#888;">S:</b> ${l.boundaries.south}</div>`:""}
                        ${l.boundaries.east?`<div><b style="color:#888;">E:</b> ${l.boundaries.east}</div>`:""}
                        ${l.boundaries.west?`<div><b style="color:#888;">W:</b> ${l.boundaries.west}</div>`:""}
                    </div>
                `:""}
            </div>
        `).addTo(h.current)}))},[T,me]),r.useEffect(()=>{!o&&U.current&&u.current&&(U.current.remove(),U.current=null)},[o]);const Le=async l=>{if(l.preventDefault(),!(!Q.trim()||!u.current)){J(!0);try{const y=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(Q)}`)).json();if(y&&y.length>0){const{lat:A,lon:E}=y[0];u.current.flyTo([parseFloat(A),parseFloat(E)],16)}else alert("Location not found")}catch(j){console.error(j)}finally{J(!1)}}},Ie=async()=>{var l;if(!s||!x||!g.rate||!g.areaName){alert("Please fill in Rate and Area Name.");return}m(!0);try{await ae(M(N,"market_intelligence"),{lat:x.lat,lng:x.lng,type:g.type,rate:parseFloat(g.rate),areaName:g.areaName,city:g.city,boundaries:g.boundaries,userId:s.uid,recordedBy:((l=s.email)==null?void 0:l.split("@")[0])||"Staff",timestamp:ee()}),t(!1),C({type:"Residential",rate:"",areaName:"",city:"",boundaries:{north:"",south:"",east:"",west:""}}),alert("Market Rate Recorded Successfully")}catch(j){console.error("Error saving market data:",j),alert("Failed to record data. Check permissions.")}finally{m(!1)}},De=()=>{if(D(!0),!navigator.geolocation){alert("Geolocation is not supported."),D(!1);return}navigator.geolocation.getCurrentPosition(l=>{const{latitude:j,longitude:y}=l.coords;u.current&&(u.current.setView([j,y],16),$.circleMarker([j,y],{radius:8,fillColor:"#3b82f6",color:"#fff",weight:3,opacity:1,fillOpacity:1}).addTo(u.current).bindPopup("You are here").openPopup()),D(!1)},l=>{console.error(l),alert("Location access denied or unavailable."),D(!1)},{enableHighAccuracy:!0})};return e.jsxs("div",{className:"relative w-full h-[600px] md:h-[calc(100vh-200px)] bg-slate-900 rounded-[3rem] overflow-hidden shadow-2xl border border-slate-200 animate-fade-in",children:[e.jsx("div",{className:"absolute top-6 left-6 z-[6000] flex flex-wrap gap-2 pointer-events-none",children:e.jsxs("div",{className:"pointer-events-auto flex gap-2",children:[i&&e.jsx("button",{onClick:i,className:"p-3 bg-white text-slate-800 rounded-xl shadow-xl transition-all hover:bg-slate-50",children:e.jsx(_,{size:20})}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-md px-4 py-3 rounded-xl shadow-xl flex items-center gap-3 border border-slate-100",children:[e.jsx(Me,{className:"text-primary",size:20}),e.jsx("span",{className:"font-extrabold text-slate-800 text-xs uppercase tracking-widest hidden sm:inline",children:"Survey Terminal"})]})]})}),e.jsxs("div",{className:"absolute top-6 right-6 z-[6000] flex flex-col items-end gap-3 max-w-[90vw]",children:[e.jsxs("form",{onSubmit:Le,className:"bg-white/95 backdrop-blur-md p-1.5 rounded-xl shadow-xl border border-slate-100 flex items-center gap-2 w-full sm:w-80",children:[e.jsx(xe,{size:16,className:"text-slate-400 ml-2"}),e.jsx("input",{value:Q,onChange:l=>P(l.target.value),placeholder:"Fly to location...",className:"w-full bg-transparent outline-none text-xs font-bold text-slate-700 py-2"}),e.jsx("button",{type:"submit",disabled:I,className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-lg text-slate-600 transition-colors",children:I?e.jsx(G,{size:14,className:"animate-spin"}):e.jsx(nt,{size:14})})]}),e.jsx("div",{className:"flex flex-wrap justify-end gap-2",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-md p-1 rounded-xl shadow-xl border border-slate-100 flex items-center",children:[e.jsxs("div",{className:"px-3 py-2 border-r border-slate-100 flex items-center gap-2",children:[e.jsx(lt,{size:14,className:"text-slate-400"}),e.jsxs("select",{value:O,onChange:l=>le(l.target.value),className:"bg-transparent outline-none text-[10px] font-bold text-slate-700 uppercase tracking-wider cursor-pointer",children:[e.jsx("option",{value:"All",children:"All Types"}),e.jsx("option",{value:"Residential",children:"Residential"}),e.jsx("option",{value:"Commercial",children:"Commercial"}),e.jsx("option",{value:"Industrial",children:"Industrial"}),e.jsx("option",{value:"Agricultural",children:"Agricultural"})]})]}),e.jsxs("div",{className:"px-3 py-2 flex items-center gap-2",children:[e.jsx(Ge,{size:14,className:"text-slate-400"}),e.jsxs("select",{value:W,onChange:l=>Z(l.target.value),className:"bg-transparent outline-none text-[10px] font-bold text-slate-700 uppercase tracking-wider cursor-pointer",children:[e.jsx("option",{value:"All",children:"All Time"}),e.jsx("option",{value:"30",children:"Last 30 Days"}),e.jsx("option",{value:"90",children:"Last 90 Days"})]})]})]})})]}),e.jsx("div",{className:"absolute bottom-8 right-6 z-[5000]",children:e.jsx("button",{onClick:De,disabled:S,className:"p-4 bg-white text-slate-800 rounded-full shadow-xl transition-all hover:bg-slate-50 hover:scale-110 active:scale-95 disabled:opacity-70",title:"My Location",children:S?e.jsx(G,{className:"animate-spin text-primary",size:24}):e.jsx(He,{size:24,className:"text-slate-700"})})}),o&&x&&e.jsxs("div",{className:"absolute bottom-6 left-6 right-6 z-[6000] bg-white/95 backdrop-blur-xl p-6 rounded-[2rem] shadow-2xl border border-slate-100 animate-slide-up max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-black text-slate-900",children:"Record Land Rate"}),e.jsxs("p",{className:"text-xs font-bold text-slate-400 flex items-center gap-1",children:[e.jsx(de,{size:12})," ",x.lat.toFixed(6),", ",x.lng.toFixed(6),e.jsx("span",{className:"ml-1 text-primary text-[10px] uppercase tracking-wider",children:"(Draggable)"})]})]}),e.jsx("button",{onClick:()=>t(!1),className:"p-2 bg-slate-100 rounded-full text-slate-500 hover:bg-slate-200",children:e.jsx(te,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Property Type"}),e.jsxs("select",{value:g.type,onChange:l=>C({...g,type:l.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm outline-none",children:[e.jsx("option",{children:"Residential"}),e.jsx("option",{children:"Commercial"}),e.jsx("option",{children:"Industrial"}),e.jsx("option",{children:"Agricultural"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Rate (₹/unit)"}),e.jsx("input",{type:"number",value:g.rate,onChange:l=>C({...g,rate:l.target.value}),placeholder:"0.00",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Area Name"}),e.jsx("input",{value:g.areaName,onChange:l=>C({...g,areaName:l.target.value}),placeholder:"Locality...",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"City"}),e.jsx("input",{value:g.city,onChange:l=>C({...g,city:l.target.value}),placeholder:"City...",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm outline-none"})]})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Qe,{size:14,className:"text-slate-400"}),e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Plot Boundaries / Dimensions"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] font-bold text-slate-400 ml-1 mb-1 block",children:"North"}),e.jsx("input",{placeholder:"e.g. Road 30ft",className:"w-full p-2.5 bg-white border border-slate-200 rounded-lg text-xs font-medium outline-none focus:border-primary/50",value:g.boundaries.north,onChange:l=>C({...g,boundaries:{...g.boundaries,north:l.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] font-bold text-slate-400 ml-1 mb-1 block",children:"South"}),e.jsx("input",{placeholder:"e.g. Plot No 5",className:"w-full p-2.5 bg-white border border-slate-200 rounded-lg text-xs font-medium outline-none focus:border-primary/50",value:g.boundaries.south,onChange:l=>C({...g,boundaries:{...g.boundaries,south:l.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] font-bold text-slate-400 ml-1 mb-1 block",children:"East"}),e.jsx("input",{placeholder:"e.g. Park",className:"w-full p-2.5 bg-white border border-slate-200 rounded-lg text-xs font-medium outline-none focus:border-primary/50",value:g.boundaries.east,onChange:l=>C({...g,boundaries:{...g.boundaries,east:l.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] font-bold text-slate-400 ml-1 mb-1 block",children:"West"}),e.jsx("input",{placeholder:"e.g. House",className:"w-full p-2.5 bg-white border border-slate-200 rounded-lg text-xs font-medium outline-none focus:border-primary/50",value:g.boundaries.west,onChange:l=>C({...g,boundaries:{...g.boundaries,west:l.target.value}})})]})]})]}),e.jsxs("button",{onClick:Ie,disabled:a,className:"w-full py-4 bg-primary text-white rounded-xl font-black shadow-lg shadow-blue-200 active:scale-95 transition-transform flex items-center justify-center gap-2",children:[a?e.jsx(G,{className:"animate-spin"}):e.jsx(Je,{size:18})," Save Market Data"]})]}),e.jsx("div",{ref:d,className:"w-full h-full z-0 relative",style:{isolation:"isolate"}})]})},vt=({onBack:i})=>{const{user:s}=q(),[n,d]=r.useState([]),[u,o]=r.useState(!1),[t,x]=r.useState({category:"Site Visit",status:"Completed",bank:"",branch:"",customerName:"",place:"",reason:""});r.useEffect(()=>{if(!s)return;const a=B(M(N,"daily_work_logs"),V("userId","==",s.uid),Y(50)),m=H(a,{next:c=>{const f=c.docs.map(b=>({id:b.id,...b.data()}));f.sort((b,w)=>{var T,z;const g=(T=b.timestamp)!=null&&T.toMillis?b.timestamp.toMillis():0;return((z=w.timestamp)!=null&&z.toMillis?w.timestamp.toMillis():0)-g}),d(f)},error:c=>{c.code!=="permission-denied"&&console.error("WorkLog load error",c)}});return()=>m()},[s]);const p=async a=>{if(a.preventDefault(),!!s)try{await ae(M(N,"daily_work_logs"),{...t,userId:s.uid,name:s.displayName||s.email,timestamp:ee(),location:{lat:0,lng:0}}),o(!1),x({category:"Site Visit",status:"Completed",bank:"",branch:"",customerName:"",place:"",reason:""})}catch(m){console.error("Error adding log",m),alert("Failed to add log.")}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:i,className:"p-3 bg-white text-slate-500 hover:text-slate-800 rounded-xl shadow-sm",children:e.jsx(_,{size:20})}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:"Daily Work Log"})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-xl text-slate-900",children:"New Entry"}),e.jsx("button",{onClick:()=>o(!u),className:"p-2 bg-slate-100 rounded-full",children:u?e.jsx(te,{size:20}):e.jsx(K,{size:20})})]}),u&&e.jsxs("form",{onSubmit:p,className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("select",{className:"p-3 bg-slate-50 rounded-xl font-bold text-sm outline-none",value:t.category,onChange:a=>x({...t,category:a.target.value}),children:[e.jsx("option",{children:"Site Visit"}),e.jsx("option",{children:"Travel"}),e.jsx("option",{children:"Office Work"}),e.jsx("option",{children:"Meeting"})]}),e.jsxs("select",{className:"p-3 bg-slate-50 rounded-xl font-bold text-sm outline-none",value:t.status,onChange:a=>x({...t,status:a.target.value}),children:[e.jsx("option",{children:"Completed"}),e.jsx("option",{children:"In Progress"}),e.jsx("option",{children:"Pending"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{placeholder:"Bank Name",className:"p-3 bg-slate-50 rounded-xl font-medium text-sm outline-none",value:t.bank,onChange:a=>x({...t,bank:a.target.value})}),e.jsx("input",{placeholder:"Customer Name",className:"p-3 bg-slate-50 rounded-xl font-medium text-sm outline-none",value:t.customerName,onChange:a=>x({...t,customerName:a.target.value})})]}),e.jsx("input",{placeholder:"Location / Place",className:"w-full p-3 bg-slate-50 rounded-xl font-medium text-sm outline-none",value:t.place,onChange:a=>x({...t,place:a.target.value})}),e.jsx("textarea",{placeholder:"Description of work...",className:"w-full p-3 bg-slate-50 rounded-xl font-medium text-sm outline-none",rows:2,value:t.reason,onChange:a=>x({...t,reason:a.target.value})}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-primary text-white rounded-xl font-bold shadow-lg",children:"Submit Log"})]}),e.jsxs("div",{className:"space-y-3 max-h-[500px] overflow-y-auto custom-scrollbar",children:[n.map(a=>{var m;return e.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl flex justify-between items-center border border-slate-100",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-slate-900 text-sm",children:[a.category," ",e.jsxs("span",{className:"text-slate-400 font-normal",children:["| ",a.status]})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:[a.place||"No Location"," - ",a.bank||a.customerName||"General"]}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:(m=a.timestamp)==null?void 0:m.toDate().toLocaleString()})]})},a.id)}),n.length===0&&e.jsx("p",{className:"text-center text-slate-400 text-sm py-4",children:"No recent logs."})]})]})]})},jt=({onBack:i})=>{const[s,n]=r.useState([]),[d,u]=r.useState("");r.useEffect(()=>{const t=B(M(N,"directory_contacts"),ce("bank","asc"),Y(100)),x=H(t,{next:p=>{n(p.docs.map(a=>({id:a.id,...a.data()})))},error:p=>{p.code!=="permission-denied"&&console.error("Bank directory fetch error",p)}});return()=>x()},[]);const o=s.filter(t=>(t.bank||"").toLowerCase().includes(d.toLowerCase())||(t.city||"").toLowerCase().includes(d.toLowerCase()));return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:i,className:"p-3 bg-white text-slate-500 hover:text-slate-800 rounded-xl shadow-sm",children:e.jsx(_,{size:20})}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:"Bank Directory"})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{className:"w-full pl-12 pr-4 py-3 bg-slate-50 rounded-xl font-medium outline-none border border-slate-200 focus:border-primary",placeholder:"Search banks or cities...",value:d,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[600px] overflow-y-auto custom-scrollbar",children:[o.map(t=>e.jsxs("div",{className:"p-5 bg-slate-50 rounded-2xl border border-slate-100 hover:border-indigo-200 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-indigo-600 shadow-sm",children:e.jsx(se,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-slate-900 text-sm",children:t.bank}),e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:t.branch})]})]}),e.jsxs("div",{className:"space-y-1 text-xs text-slate-600 ml-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{size:12})," ",t.city,", ",t.state]}),t.contact_person&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{size:12})," ",t.contact_person]}),t.primary_phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{size:12})," ",e.jsx("a",{href:`tel:${t.primary_phone}`,className:"hover:text-primary",children:t.primary_phone})]})]})]},t.id)),o.length===0&&e.jsx("p",{className:"col-span-full text-center text-slate-400 py-10",children:"No contacts found."})]})]})]})},yt=({onLaunch:i})=>{const{userRole:s}=q(),[n,d]=r.useState([]),[u,o]=r.useState(!1),[t,x]=r.useState(()=>JSON.parse(localStorage.getItem("abs_fav_apps")||"[]")),[p,a]=r.useState(""),[m,c]=r.useState(null),f=["super_admin","admin","employee"].includes(s||""),b={LinkIcon:ge,Globe:pe,Calculator:st,FileText:Ve,PieChart:ct,PenTool:it,Box:tt,Briefcase:Re,Layers:Ke},w={blue:"bg-blue-600",emerald:"bg-emerald-600",purple:"bg-purple-600",orange:"bg-orange-600",rose:"bg-rose-600",indigo:"bg-indigo-600",slate:"bg-slate-600"};r.useEffect(()=>{const h=B(M(N,"external_apps"),ce("createdAt","desc")),v=H(h,{next:L=>{d(L.docs.map(S=>({id:S.id,...S.data()}))),o(!1)},error:L=>{L.code==="permission-denied"&&o(!0)}});return()=>v()},[]);const g=(h,v)=>{h.stopPropagation();const L=t.includes(v)?t.filter(S=>S!==v):[...t,v];x(L),localStorage.setItem("abs_fav_apps",JSON.stringify(L))},C=async h=>{try{await ke(Ce(N,"external_apps",h.id),{clicks:Oe(1)})}catch(v){v.code!=="permission-denied"&&console.error("Tracking error",v)}h.isEmbeddable?c(h):window.open(h.url,"_blank")},T=r.useMemo(()=>{let h=[...n];return p&&(h=h.filter(v=>v.name.toLowerCase().includes(p.toLowerCase()))),h.sort((v,L)=>{const S=t.includes(v.id),D=t.includes(L.id);return S&&!D?-1:!S&&D?1:0})},[n,t,p]),z=[{id:"work-log",name:"Activity Log",icon:Ne,color:"bg-blue-600",desc:"Institutional log for site visits."}];return f&&(z.push({id:"performance",name:"Performance",icon:ie,color:"bg-rose-600",desc:"Personal scores, attendance, and billing."}),z.push({id:"market-data",name:"Intelligence",icon:Me,color:"bg-primary",desc:"Real-time property rate mapping."}),z.push({id:"survey-pad",name:"Digital Survey",icon:Ze,color:"bg-teal-600",desc:"On-site property survey pad with offline support."}),z.push({id:"chat",name:"Secure Chat",icon:ye,color:"bg-green-600",desc:"Encrypted case communication."})),z.push({id:"bank-directory",name:"Bank Directory",icon:Xe,color:"bg-indigo-600",desc:"Branch contact directory."}),m?e.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col animate-fade-in",children:[e.jsxs("div",{className:"h-16 bg-slate-900 flex items-center justify-between px-6 shadow-md shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>c(null),className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-full transition-colors",children:e.jsx(_,{size:24})}),e.jsxs("div",{className:"text-white",children:[e.jsx("h3",{className:"font-bold text-lg leading-tight",children:m.name}),e.jsx("p",{className:"text-[10px] text-white/50 truncate max-w-xs",children:m.url})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:m.url,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-xs font-bold transition-colors",children:[e.jsx(Ee,{size:14})," Open in Browser"]}),e.jsx("button",{onClick:()=>c(null),className:"p-2 text-white hover:bg-rose-500 rounded-full transition-colors",children:e.jsx(te,{size:24})})]})]}),e.jsxs("div",{className:"flex-1 bg-slate-100 relative",children:[e.jsx("iframe",{src:m.url,className:"w-full h-full border-0",title:m.name,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms"}),e.jsxs("div",{className:"absolute inset-0 -z-10 flex items-center justify-center text-slate-400 font-bold",children:[e.jsx(G,{className:"animate-spin mr-2"})," Loading content..."]})]})]}):e.jsxs("div",{className:"space-y-12 animate-fade-in pb-20",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:z.map(h=>e.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border border-slate-100 shadow-sm hover:shadow-2xl transition-all group overflow-hidden",children:[e.jsx("div",{className:`w-16 h-16 rounded-[1.25rem] ${h.color} text-white flex items-center justify-center mb-8 shadow-xl group-hover:rotate-6 transition-transform`,children:e.jsx(h.icon,{size:32})}),e.jsx("h4",{className:"text-2xl font-black text-slate-900 mb-3 tracking-tighter",children:h.name}),e.jsx("p",{className:"text-slate-500 text-sm mb-10 leading-relaxed font-medium",children:h.desc}),e.jsx("button",{onClick:()=>i(h.id),className:"w-full py-4 bg-slate-900 text-white rounded-[1.5rem] text-xs font-bold uppercase tracking-widest hover:bg-black transition-all",children:"Open Module"})]},h.id))}),e.jsxs("div",{className:"pt-8 border-t border-slate-200",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900 flex items-center gap-2",children:[e.jsx(pe,{size:20})," External Tools"]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:16}),e.jsx("input",{value:p,onChange:h=>a(h.target.value),placeholder:"Find an app...",className:"w-full pl-10 pr-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all shadow-sm"})]})]}),n.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:T.map(h=>{const v=b[h.iconName||"LinkIcon"]||ge,L=w[h.color||"blue"]||"bg-blue-600",S=t.includes(h.id);return e.jsxs("div",{className:"bg-white p-8 rounded-[3rem] border border-slate-100 shadow-sm hover:shadow-xl transition-all group relative",children:[e.jsx("button",{onClick:D=>g(D,h.id),className:`absolute top-8 right-8 p-2 rounded-full transition-all ${S?"text-amber-400 bg-amber-50":"text-slate-300 hover:text-amber-400"}`,children:e.jsx(Fe,{size:20,fill:S?"currentColor":"none"})}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsx("div",{className:`w-12 h-12 rounded-2xl ${L} text-white flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(v,{size:24})})}),e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-2 flex items-center gap-2",children:[h.name,h.isEmbeddable&&e.jsxs("span",{className:"bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-wider",children:[e.jsx(ot,{size:10,className:"inline mr-1"})," App"]})]}),e.jsx("p",{className:"text-slate-500 text-xs mb-6 line-clamp-2 min-h-[2.5em]",children:h.description}),e.jsx("button",{onClick:()=>C(h),className:"w-full py-3 bg-slate-50 text-slate-700 rounded-xl text-xs font-bold uppercase tracking-wide hover:bg-primary hover:text-white transition-all",children:h.isEmbeddable?"Launch App":"Visit Website"})]},h.id)})}):e.jsx("div",{className:"p-12 text-center bg-slate-50 rounded-[3rem] border border-dashed border-slate-200",children:e.jsx("p",{className:"text-slate-400 font-bold",children:"No external apps deployed yet."})})]})]})},wt=({onLaunch:i})=>{const s=[{id:"converter",name:"Unit Converter",icon:Se,color:"bg-orange-500",desc:"Precision land area scaling utility."},{id:"mortgage",name:"EMI Estimator",icon:se,color:"bg-emerald-600",desc:"Institutional loan calculation tool."},{id:"notes",name:"Survey Pad",icon:ze,color:"bg-purple-600",desc:"Rapid field observation documentation."}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 animate-fade-in",children:s.map(n=>e.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border border-slate-100 shadow-sm hover:shadow-2xl transition-all group overflow-hidden",children:[e.jsx("div",{className:`w-16 h-16 rounded-[1.25rem] ${n.color} text-white flex items-center justify-center mb-8 shadow-xl`,children:e.jsx(n.icon,{size:32})}),e.jsx("h4",{className:"text-2xl font-black text-slate-900 mb-3 tracking-tighter",children:n.name}),e.jsx("p",{className:"text-slate-500 text-sm mb-10 leading-relaxed font-medium",children:n.desc}),e.jsx("button",{onClick:()=>i(n.id),className:"w-full py-4 bg-slate-100 text-slate-700 rounded-[1.5rem] text-xs font-bold uppercase tracking-widest border border-slate-200 hover:bg-slate-900 hover:text-white transition-all",children:"Launch Utility"})]},n.id))})},Ct=()=>{var f;const{logout:i,user:s,userRole:n}=q(),[d,u]=r.useState("dashboard"),[o,t]=r.useState(null),[x,p]=r.useState(!1),a=["super_admin","admin","employee"].includes(n||""),m=()=>{var b,w;if(d==="market-intelligence")return e.jsx(je,{onBack:()=>u("dashboard")});if(d==="chat")return e.jsx(be,{});if(d==="apps")return o==="work-log"?e.jsx(vt,{onBack:()=>t(null)}):o==="performance"?e.jsx(ft,{onBack:()=>t(null)}):o==="market-data"?e.jsx(je,{onBack:()=>t(null)}):o==="bank-directory"?e.jsx(jt,{onBack:()=>t(null)}):o==="survey-pad"?e.jsx(Ue,{onBack:()=>t(null)}):o==="chat"?e.jsx(be,{onClose:()=>t(null)}):e.jsx(yt,{onLaunch:t});if(d==="tools")return o==="converter"?e.jsx(mt,{onBack:()=>t(null)}):o==="mortgage"?e.jsx(ut,{onBack:()=>t(null)}):o==="notes"?e.jsx(ht,{onBack:()=>t(null)}):e.jsx(wt,{onLaunch:t});switch(d){case"dashboard":return e.jsxs("div",{className:"space-y-8 animate-fade-in relative",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"bg-slate-900 p-16 rounded-[4.5rem] text-white shadow-2xl col-span-1 lg:col-span-2 relative overflow-hidden",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h3",{className:"text-5xl font-black mb-6 tracking-tighter",children:["Welcome, ",((b=s==null?void 0:s.displayName)==null?void 0:b.split(" ")[0])||"Professional"]}),e.jsx("p",{className:"text-slate-400 mb-12 text-xl font-light leading-relaxed max-w-lg",children:"Institutional workspace active. Property intelligence and activity logs are synchronized."}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("button",{onClick:()=>{u("apps"),t("work-log")},className:"bg-primary text-white px-10 py-5 rounded-[2rem] font-bold shadow-2xl text-sm flex items-center gap-2 hover:scale-105 transition-transform",children:[e.jsx(Ne,{size:18})," Daily Work Log"]}),a&&e.jsxs("button",{onClick:()=>{u("apps"),t("performance")},className:"bg-white/10 text-white px-10 py-5 rounded-[2rem] font-bold backdrop-blur-md transition-all text-sm border border-white/10 hover:bg-white/20 flex items-center gap-2",children:[e.jsx(ie,{size:18})," Performance"]})]})]})}),e.jsxs("div",{className:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-2xl flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"p-5 bg-emerald-50 text-emerald-600 rounded-[2rem] mb-6 shadow-sm",children:e.jsx(Be,{size:40})}),e.jsx("div",{className:"text-[11px] font-black text-slate-400 mb-2 uppercase tracking-[0.4em]",children:"Verified Identity"}),e.jsx("div",{className:"text-2xl font-black text-slate-900 capitalize tracking-tighter",children:n||"Client"}),e.jsxs("div",{className:"mt-6 px-4 py-2 bg-emerald-50 rounded-full text-[10px] text-emerald-600 font-black uppercase tracking-widest flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Secure"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border border-slate-100 shadow-sm flex items-center justify-between group cursor-pointer hover:shadow-xl transition-all",onClick:()=>u("apps"),children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 text-blue-600 rounded-2xl",children:e.jsx(fe,{size:32})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-black text-slate-900",children:"App Gallery"}),e.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Work Logs & Intelligence"})]})]}),e.jsx("div",{className:"p-4 bg-slate-50 rounded-xl text-slate-300 group-hover:bg-primary group-hover:text-white transition-colors",children:e.jsx(K,{size:24})})]}),e.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] border border-slate-100 shadow-sm flex items-center justify-between group cursor-pointer hover:shadow-xl transition-all",onClick:()=>u("tools"),children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-orange-50 text-orange-600 rounded-2xl",children:e.jsx(ve,{size:32})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-black text-slate-900",children:"Utility Hub"}),e.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Dimension & EMI Tools"})]})]}),e.jsx("div",{className:"p-4 bg-slate-50 rounded-xl text-slate-300 group-hover:bg-primary group-hover:text-white transition-colors",children:e.jsx(K,{size:24})})]})]})]});case"profile":return e.jsxs("div",{className:"bg-white p-16 rounded-[4rem] border border-slate-100 shadow-2xl max-w-3xl animate-fade-in mx-auto mt-10",children:[e.jsx("div",{className:"w-32 h-32 rounded-[3rem] bg-gradient-to-br from-primary to-blue-800 text-white flex items-center justify-center text-5xl font-black mx-auto mb-8 shadow-2xl border-8 border-white",children:(w=s==null?void 0:s.email)==null?void 0:w[0].toUpperCase()}),e.jsx("h3",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:(s==null?void 0:s.displayName)||"ABS Professional"}),e.jsx("p",{className:"text-slate-400 font-bold text-center mt-2 uppercase text-xs",children:s==null?void 0:s.email}),e.jsx("div",{className:"mt-12 flex flex-col gap-4",children:e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-3 text-rose-500 border-2 border-rose-50 hover:bg-rose-50 py-5 rounded-[2rem] font-black transition-all text-sm uppercase tracking-widest",children:[e.jsx(oe,{size:18})," Close Workspace"]})})]});default:return null}},c=[{id:"dashboard",label:"Work Overview",icon:We},{id:"apps",label:"App Gallery",icon:fe},{id:"tools",label:"Utilities",icon:ve},{id:"chat",label:"Secure Chat",icon:ye},{id:"profile",label:"Account Identity",icon:we}];return a&&c.splice(3,0,{id:"market-intelligence",label:"Intelligence Map",icon:qe}),e.jsxs("div",{className:"min-h-screen bg-slate-50 flex font-sans relative overflow-hidden",children:[x&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-40 md:hidden",onClick:()=>p(!1)}),e.jsxs("aside",{className:`fixed inset-y-0 left-0 z-50 w-72 bg-slate-900 text-slate-400 transform ${x?"translate-x-0 shadow-2xl":"-translate-x-full"} md:translate-x-0 md:static transition-transform duration-500 flex flex-col border-r border-white/5`,children:[e.jsxs("div",{className:"p-10 border-b border-white/5 flex flex-col gap-1",children:[e.jsxs("h2",{className:"text-white text-2xl font-black tracking-tighter",children:["ABS ",e.jsx("span",{className:"text-primary font-normal",children:"Panel"})]}),e.jsx("div",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest mt-1",children:"Institutional Interface"})]}),e.jsx("nav",{className:"flex-1 p-6 space-y-2 mt-4 custom-scrollbar",children:c.map(b=>e.jsxs("button",{onClick:()=>{u(b.id),t(null),p(!1)},className:`w-full flex items-center gap-4 px-6 py-4.5 rounded-[1.5rem] transition-all group ${d===b.id?"bg-primary text-white shadow-xl shadow-primary/20":"hover:bg-white/5 hover:text-white"}`,children:[e.jsx(b.icon,{size:18,className:d===b.id?"opacity-100":"opacity-40 group-hover:opacity-100"}),e.jsx("span",{className:"font-bold text-sm tracking-tight",children:b.label})]},b.id))}),e.jsx("div",{className:"p-6 border-t border-white/5",children:e.jsxs("button",{onClick:i,className:"w-full flex items-center gap-4 px-6 py-4.5 rounded-[1.5rem] hover:bg-rose-500/10 text-slate-500 hover:text-rose-400 font-bold text-sm transition-all group",children:[e.jsx(oe,{size:18}),e.jsx("span",{children:"End Workspace"})]})})]}),e.jsxs("main",{className:"flex-1 flex flex-col h-screen overflow-hidden relative",children:[e.jsxs("header",{className:"h-24 bg-white border-b border-slate-200 flex items-center justify-between px-10 shrink-0 z-30 shadow-sm",children:[e.jsx("button",{onClick:()=>p(!0),className:"md:hidden p-3 bg-slate-100 rounded-2xl text-slate-600",children:e.jsx(Ae,{size:24})}),e.jsx("h1",{className:"text-3xl font-black text-slate-900 capitalize tracking-tighter",children:o?o.replace("-"," "):d.replace("-"," ")}),e.jsx("div",{className:"w-14 h-14 rounded-[1.5rem] bg-gradient-to-br from-primary to-blue-800 flex items-center justify-center text-white font-black text-xl shadow-2xl border-4 border-white",children:(f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase()})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 md:p-12 bg-slate-50/30 custom-scrollbar",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:m()})})]})]})};export{Ct as default};
