(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730],{97559:function(e,t,a){Promise.resolve().then(a.bind(a,63559))},63559:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(57437),r=a(2265),n=a(74488),d=a(88689);let i=e=>{let t=new Map,a=e.filter(e=>["delivered","closed"].includes(e.status));return e.forEach(e=>{if(!e.assignedTo)return;t.has(e.assignedTo)||t.set(e.assignedTo,{staffId:e.assignedTo,name:e.assignedToName||"Unknown Staff",totalAssigned:0,delivered:0,pending:0,avgDeliveryTimeHours:0});let a=t.get(e.assignedTo);a.totalAssigned++,["delivered","closed"].includes(e.status)?a.delivered++:a.pending++}),Array.from(t.values()).map(e=>{let t=a.filter(t=>t.assignedTo===e.staffId),s=t.reduce((e,t)=>e+(t.updatedAt-t.createdAt),0),r=t.length>0?s/t.length/3600:0;return{...e,avgDeliveryTimeHours:parseFloat(r.toFixed(1))}})};function o(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)("week"),[l,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{c(!0);try{let e=(0,n.ki)(a),s=await (0,n.wD)(e);t(s)}catch(e){console.error("Failed to load metrics",e)}finally{c(!1)}})()},[a]);let u=(0,r.useMemo)(()=>i(e),[e]);return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff Performance"})}),(0,s.jsx)(d.f8,{currentFilter:a,onFilterChange:o,onExport:()=>(0,n.GS)(e),isLoading:l}),l?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,s.jsxs)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden animate-in fade-in duration-500",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Performance Metrics"})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)(d.xD,{headers:["Staff Name","Total Assigned","Delivered","Pending","Avg Time (Hrs)","Efficiency"]}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.totalAssigned}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:e.delivered}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-yellow-600 font-medium",children:e.pending}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.avgDeliveryTimeHours}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(e.delivered/(e.totalAssigned||1)*100).toFixed(0),"%"]})]},e.staffId))})]})})]})]})}},88689:function(e,t,a){"use strict";a.d(t,{OE:function(){return i},Rm:function(){return r},f8:function(){return n},xD:function(){return d}});var s=a(57437);a(2265);let r=e=>{let{title:t,value:a,icon:r,trend:n,colorClass:d,trendColor:i}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:t}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:a}),n&&(0,s.jsx)("p",{className:"text-xs mt-2 font-medium ".concat(i||"text-gray-500"),children:n})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg ".concat(d," bg-opacity-10"),children:(0,s.jsx)(r,{className:"w-6 h-6 ".concat(d.replace("bg-","text-"))})})]})},n=e=>{let{currentFilter:t,onFilterChange:a,onExport:r,onSeed:n,isLoading:d}=e;return(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center bg-white p-4 rounded-lg border border-gray-200 mb-6 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Time Range:"}),(0,s.jsxs)("select",{value:t,onChange:e=>a(e.target.value),className:"form-select block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:[(0,s.jsx)("option",{value:"today",children:"Today"}),(0,s.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,s.jsx)("option",{value:"month",children:"Last 30 Days"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:n,disabled:d,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white \n          ".concat(d?"bg-gray-400 cursor-not-allowed":"bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"),children:d?"Loading...":"Seed Database"}),(0,s.jsx)("button",{onClick:r,disabled:d,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white \n          ".concat(d?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:d?"Loading...":"Export CSV"})]})]})},d=e=>{let{headers:t}=e;return(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsx)("tr",{children:t.map((e,t)=>(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},t))})})},i=e=>{let{status:t}=e;return(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({delivered:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800",received:"bg-blue-100 text-blue-800",assigned:"bg-yellow-100 text-yellow-800"}[t]||"bg-gray-100"),children:t.charAt(0).toUpperCase()+t.slice(1)})}},17293:function(e,t,a){"use strict";let s,r;a.d(t,{I:function(){return l},db:function(){return r}});var n=a(738),d=a(43301),i=a(5978),o=a(60062);s=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyBbTyHWp3qBNPVYdkauEWN9_FCu67govr0",authDomain:"abs1-96886.firebaseapp.com",projectId:"abs1-96886",storageBucket:"abs1-96886.appspot.com",messagingSenderId:"139924754132",appId:"1:139924754132:web:cc366779227133dab5f541"});let l=(0,d.v0)(s);(0,o.cF)(s);try{r=(0,i.ad)(s)}catch(e){console.error("Firestore initialization failed:",e),r=(0,i.LV)(s,{localCache:(0,i.j5)({tabManager:(0,i.n3)()})})}},74488:function(e,t,a){"use strict";a.d(t,{GS:function(){return i},ki:function(){return d},vQ:function(){return o},wD:function(){return n}});var s=a(17293),r=a(5978);let n=async e=>{let t=(0,r.hJ)(s.db,"parcels"),a=Math.floor(e.startDate.getTime()/1e3),n=Math.floor(e.endDate.getTime()/1e3),d=(0,r.IO)(t,(0,r.ar)("createdAt",">=",a),(0,r.ar)("createdAt","<=",n));try{let e=await (0,r.PL)(d),t=[];return e.forEach(e=>{t.push(e.data())}),t}catch(e){throw console.error("Error fetching parcels:",e),e}},d=e=>{let t=new Date,a=new Date;return"today"===e?a.setHours(0,0,0,0):"week"===e?a.setDate(t.getDate()-7):a.setMonth(t.getMonth()-1),{startDate:a,endDate:t}},i=e=>{let t=encodeURI("data:text/csv;charset=utf-8,"+["Parcel ID,Courier,Staff,Status,Type,Created Date,Delivered Date",...e.map(e=>{let t=new Date(1e3*e.createdAt).toLocaleString(),a="delivered"===e.status||"closed"===e.status?new Date(1e3*e.updatedAt).toLocaleString():"N/A";return[e.parcelId,e.courierCompany,e.assignedToName||e.assignedTo,e.status,e.type,'"'.concat(t,'"'),'"'.concat(a,'"')].join(",")})].join("\n")),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","parcel_report.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},o=async()=>{let e=(0,r.qs)(s.db);Object.values({"PCL-2024-1001":{parcelId:"PCL-2024-1001",type:"incoming",courierCompany:"BlueDart",assignedTo:"staff_1",assignedToName:"Alice Johnson",status:"delivered",createdAt:1709539200,updatedAt:1709625600},"PCL-2024-1002":{parcelId:"PCL-2024-1002",type:"outgoing",courierCompany:"FedEx",assignedTo:"staff_2",assignedToName:"Bob Smith",status:"assigned",createdAt:1710144e3,updatedAt:1710144e3},"PCL-2024-1003":{parcelId:"PCL-2024-1003",type:"incoming",courierCompany:"DTDC",assignedTo:"staff_3",assignedToName:"Charlie Brown",status:"received",createdAt:1710230400,updatedAt:1710230400},"PCL-2024-1004":{parcelId:"PCL-2024-1004",type:"incoming",courierCompany:"Delhivery",assignedTo:"staff_1",assignedToName:"Alice Johnson",status:"closed",createdAt:170928e4,updatedAt:1709366400},"PCL-2024-1005":{parcelId:"PCL-2024-1005",type:"outgoing",courierCompany:"BlueDart",assignedTo:"staff_2",assignedToName:"Bob Smith",status:"assigned",createdAt:1709884800,updatedAt:1709884800},"PCL-2024-1006":{parcelId:"PCL-2024-1006",type:"incoming",courierCompany:"FedEx",assignedTo:"staff_1",assignedToName:"Alice Johnson",status:"delivered",createdAt:1710316800,updatedAt:1710324e3}}).forEach(t=>{let a=(0,r.JU)(s.db,"parcels",t.parcelId);e.set(a,t)}),await e.commit(),console.log("Database seeded successfully!")}}},function(e){e.O(0,[358,139,933,971,117,744],function(){return e(e.s=97559)}),_N_E=e.O()}]);